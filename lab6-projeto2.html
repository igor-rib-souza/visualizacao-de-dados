<!DOCTYPE html>
<html style="height: 100%">
  <head>
    <meta charset="utf-8" />
    <title>Variação da chuva acumulada por ano (2015 a 2024) - Fazenda Carnaúba - Taperoá - PB</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
  </head>
  <body style="height: 100%; margin: 0">
    <div id="main" style="height: 100%"></div>

    <script>
      var chartDom = document.getElementById('main');
      var myChart = echarts.init(chartDom);
      var option;

      const anos = [
        '2015', '2016', '2017', '2018', '2019',
        '2020', '2021', '2022', '2023', '2024'
      ];

      const variacoes = [
        386.7 - 404.6,
        295.0 - 386.7,
        211.5 - 295.0,
        764.8 - 211.5,
        497.9 - 764.8,
        591.3 - 497.9,
        388.5 - 591.3,
        938.6 - 388.5,
        465.6 - 938.6,
        378.2 - 465.6
      ];

      const variacoesFormatadas = variacoes.map(v => parseFloat(v.toFixed(2)));

      option = {
        title: {
          text: 'Variação da chuva acumulada por ano (2015 a 2024)',
          subtext: 'Fazenda Carnaúba - Taperoá - PB',
          left: 'center'
        },
        tooltip: {
          trigger: 'axis',
          formatter: function (params) {
            let ano = params[0].name;
            let valor = params[0].data.toFixed(2);
            return `${ano}: ${valor} mm`;
          }
        },
        toolbox: {
          feature: {
            dataZoom: {
              yAxisIndex: 'none'
            },
            restore: {},
            saveAsImage: {}
          }
        },
        xAxis: {
          type: 'category',
          data: anos
        },
        yAxis: {
          type: 'value',
          name: 'mm'
        },
        dataZoom: [
          {
            type: 'slider',
            start: 0,
            end: 100
          },
          {
            type: 'inside',
            start: 0,
            end: 100
          }
        ],
        visualMap: {
          top: 50,
          right: 10,
          pieces: [
            {
              gt: 0,
              color: '#91cc75'
            },
            {
              lte: 0,
              color: '#fac858'
            }
          ],
          outOfRange: {
            color: '#999'
          }
        },
        series: [
          {
            data: variacoesFormatadas,
            type: 'bar'
          }
        ]
      };

      option && myChart.setOption(option);
    </script>
  </body>
</html>
